---
title: 计算机组成原理关键记录
date: 2023-12-07 15:38:38
tags:
---

### 第一章 计算机系统概念

将高级语言程序翻译为机器语言程序的软件称为翻译软件，有两种，一种是「编译程序」，一种是「解释程序」。

冯诺依曼计算机的特点：

![image-20231209144026178](计算机组成原理关键记录/image-20231209144026178.png)

现代的计算机已经转变为「以**存储器**为中心」。

CPU 和主存储器合起来，又可以称为「主机」。

主存储器简称主存或者内存，包括存储体 M、各种逻辑部件和控制电路。**存储体由许多存储单元组成，每一个存储单元又有若干个存储元件**（或者称为存储元、存储基元），每个存储元件都能寄存一位二进制代码。可见，**一个存储单元可以存储一串二进制代码**，称这串二进制代码为一个**存储字**，这串二进制代码的位数为**存储字长**。

主存工作的时候是按照**存储单元**的地址号来存取

**MAR：** memory address register

**MDR：** memory data register

现在，MDR 和 MAR 通常集成在 CPU 芯片内。

一般情况下，所有的硬件组件（CPU、GPU、外设等）都无法直接访问外存，而是通过内存进行交互。当计算机启动时，操作系统会将需要的程序和数据从外存加载到内存中，然后 CPU 可以直接访问内存中的数据来执行任务。

**PC**，Program Counter 程序计数器，与 MAR 之间有通路连接。

### 第二章 计算机的发展及应用

**计算机的产生和发展**：

1. 第一代电子管计算机，1943 二战时期
2. 第二代晶体管计算机，1947
3. 第三代集成电路计算机

总线 bus

总线按照不同的角度，有很多种分类方式，按连接部件的不同，有三种：

1. 片内总线，指的是芯片内部的总线，如 CPU 芯片的内部、寄存器与寄存器之间。
2. 系统总线，指的是 CPU、主存、IO 设备各大部件之间的信息传输线
   按照传输信息的不同，又可以分为三类：数据总线、地址总线、控制总线
3. 通信总线，这类总线用于计算机系统之间或者计算机系统与其他系统之间的通信。

### 第四章 存储器

按照在系统中的作用分类，可以分为主存储器、辅助存储器、缓冲存储器

主存储器：可以和 CPU 直接交换信息

辅助存储器：不能和 CPU 直接交换信息

主存的结构：

![image-20231209163806854](计算机组成原理关键记录/image-20231209163806854.png)

现代的计算机主存都是由半导体集成电路构成，图中的驱动器、译码器和读写电路均制作在存储芯片之中，而 MAR 和 MDR 制作在 CPU 芯片之中。存储芯片和 CPU 芯片可以通过总线连接。

**存储速度**是由**存储时间**和**存储周期**来表示的。

存储时间：存储器的访问时间，指启动一次存储器操作（读或者写）到完成该操作的时间

存储周期：存储器进行连续两次独立的存储器操作所需的最小间隔时间，**通常存储周期大于存储时间**。

存储带宽：表示单位时间内存储器的存取信息量。

![image-20231209164855648](计算机组成原理关键记录/image-20231209164855648.png)

**地址线和数据线的位数共同反应**存储芯片的容量。

随机存取存储器按照存储信息的原理不同，可以分为动态 RAM 和静态 RAM 两大类。

存储器中用于存储 0 和 1 的代码电路称为存储器的「基本单元电路」，也就是存储基元，一个**存储单元**包括多个存储基元。

**静态 RAM：**静态 RAM 是使用触发器原理存储信息的，因此读出信息以后，仍然保持原状，不需要再生，但是掉电时，原来的信息丢失。

**动态 RAM：**动态 RAM 基本单元电路中有三管式和单管式两种，并且共同特点是都是靠 **电容存储电荷** 的原理来寄存信息。

电容上的电荷一般只能维持 1 到 2ms，所以即使电源不断电，信息也会自动消失。所以必须在 2ms 内 刷新一次。

由于动态 RAM 相比静态 RAM 集成度更高、功耗更低，所以目前被各类计算机广泛使用。

**刷新：**
采用定时刷新的方式，规定一段时间，必须对于所有的基本单元电路都刷新一次。这个时间叫做「再生周期」或者「刷新周期」。

刷新是一行一行进行的，通常有三种方式刷新：集中刷新、分散刷新和异步刷新。

1. 对全部的存储单元集中一段时间逐行进行刷新。此刻必须停止读/写操作。
   ![image-20231209173508149](计算机组成原理关键记录/image-20231209173508149.png)
   关于时间死区的计算
2. 分散刷新是指每行存储单元的刷新**分散到每一个存取周期内完成**
   ![image-20231209174055131](计算机组成原理关键记录/image-20231209174055131.png)
3. 异步刷新。将前两种方式结合，可以缩短死时间，也可以充分利用刷新周期 2ms。

**存储器容量的扩展：**

1. 位扩展
   增加**存储字长**。
2. 字扩展
   字扩展指的是**增加存储字的数量。**

**存储器和 CPU 的连接：**

1. CPU 的地址线通常比存储芯片的地址线数多。通常是将 CPU 地址线的低位与存储芯片的地址线相连，CPU 的地址线的高位或在存储芯片扩充时使用，或者用做其他用途。
2. CPU 的数据线和存储芯片的数据线数可能也不同，**此时必须对于存储芯片进行位扩展**。

**存储器的校验：**



**提高访存速度的措施：**

除了寻找高速元件和采用层次结构以外，调整主存的结构也可以提高访存速度。

1. 单体多字系统
   采用前提是：指令和数据在主存中是连续存放的，一旦遇到转移指令，或者操作数不能连续存放，效果不明显。

2. 多体并行系统

   高位地址交叉编址 和 低位地址交叉编址

关于这两种的时间计算问题

**存控：**

多体模块存储器不仅要与 CPU 交换信息，还要与辅存、IO 设备、乃至IO处理机交换信息。因此，某一时刻，应该决定主存究竟和哪一个部件交换信息。**这就是由存储器控制部件（简称存控）来承担。**

![image-20231209181755310](计算机组成原理关键记录/image-20231209181755310.png)



**Cache 主存地址映射** 

由主存地址映射到 Cache 地址叫做地址映射。

在这里我们是按照 **字块** 为单位进行映射的，其中 **字块** 的大小不一定，根据题目的定义来。**字块** 包括了若干个 **字**，一个 **字** 是若干位，这些都是题目定义。

我们把主存和 Cache 分成了若干块，进行映射。

有直接相连映射、全相联映射和组相连映射。

![image-20231209203305851](计算机组成原理关键记录/image-20231209203305851.png)

![image-20231209203320092](计算机组成原理关键记录/image-20231209203320092.png)

![image-20231209203332745](计算机组成原理关键记录/image-20231209203332745.png)

这里的题目还是比较重要的。
**课本 P120**

![image-20231209203951268](计算机组成原理关键记录/image-20231209203951268.png)

还有若干例题。。。

### 第五章 输入输出系统

![image-20231209210730500](计算机组成原理关键记录/image-20231209210730500.png)

IO 设备与主机交换信息时的控制方式：

1. 程序查询方式
2. 程序中断方式
3. DMA（直接存储器存取方式）

**设置 IO 接口的理由：**

![image-20231209214224933](计算机组成原理关键记录/image-20231209214224933.png)

**这三种方式的接口电路设计：**

程序查询方式：
![image-20231209215450386](计算机组成原理关键记录/image-20231209215450386.png)

![image-20231209215605843](计算机组成原理关键记录/image-20231209215605843.png)

IO 设备直接和主存交互的时候是 DMA 方式，但是这里是程序查询方式，所以我们就是必须经过中间的 CPU，然后再将数据存入主存。

程序中断方式：
CPU **启动设备以后**往往需要等待一段时间才能实现主机与 IO 设备之间的信息交换。如果在设备准备的同时，CPU 不做无谓的等待，而是继续执行程序，只有 IO 设备准备就绪的时候才向 CPU 提出请求，暂时中断 CPU 现行程序进入 IO 服务程序，这就是 IO 中断。

![image-20231209220904784](计算机组成原理关键记录/image-20231209220904784.png)

CPU 总是在统一的时间，比如每条指令执行阶段的最后阶段，查询所有的设备是否有中断请求。

中断向量地址形成部件的输入是来自排队器的输出，它的输出是中断向量。

![image-20231209222325961](计算机组成原理关键记录/image-20231209222325961.png)

**中断请求、中断判优、中断响应、中断服务、中断返回**五个阶段。

对于其中的**中断服务阶段**，一般来说可以分为：保护现场、中断服务、恢复现场、中断返回

保护现场：两个含义。一个是保存程序的断点，一个是保存通用寄存器和状态寄存器的内容。

恢复现场：在中断服务程序的结尾部分，在退出程序之前，将原程序中断时的现场恢复到原来的寄存器之中。

中断返回：返回原程序的断电之处

DMA 方式：

主存和 DMA 接口之间有一个数据通路。此时主存和设备交换信息的时候，不需要经过 CPU，也不需要 CPU 暂停现行程序去为设备服务。适合 **高速 IO 或者辅存与主存之间的信息交换**。

![image-20231209224832903](计算机组成原理关键记录/image-20231209224832903.png)

课本 P204

![image-20231209231605543](计算机组成原理关键记录/image-20231209231605543.png)

**了解 DMA 方式的工作过程。**



####  杂记

1. ![image-20231207153912299](计算机组成原理关键记录/image-20231207153912299.png)
2. 周期窃取又叫做周期挪用，是指利用 CPU 不访问存储器的那些周期来实现 DMA 操作。
3. I/O设备要求DMA传送会遇到三种情况，一种是此时CPU不需访问主存(如CPU正在执行乘法指令，由于乘法指令执行时间较长，此时CPU不需访问主存)，故I/O设备访存与CPU不发生冲突。第二种情况是I/O设备要求DMA传送时，CPU正在访存，此时必须待 存取周期结束时刻，CPU才能将总线占有权让出。第三种情况是I/O设备要求访存时，CPU也要求访存，这就出现了访存冲突。此刻，I/O访存优先于CPU访存，因为I/O不立即访存就可能丢失数据，这时I/O要窃取一二个存取周期，意味着CPU在执行访存指令过程中插入了DMA请求，并挪用了一二个存取周期，使CPU延缓了一二个存取周期再访存。
4. ![image-20231207162859023](计算机组成原理关键记录/image-20231207162859023.png)
5. ![image-20231207163257678](计算机组成原理关键记录/image-20231207163257678.png)
6. ![image-20231207163551737](计算机组成原理关键记录/image-20231207163551737.png)
7. ![image-20231207165814006](计算机组成原理关键记录/image-20231207165814006.png)
8. ![image-20231207170831367](计算机组成原理关键记录/image-20231207170831367.png)
9. https://zhuanlan.zhihu.com/p/633191759
10. ![image-20231209150515503](计算机组成原理关键记录/image-20231209150515503.png)
11. ![image-20231209151825169](计算机组成原理关键记录/image-20231209151825169.png)

14. 指令字长、存储字长、机器字长
